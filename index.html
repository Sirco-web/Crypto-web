<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XMR Web Miner</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .engine-banner {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border: 2px solid var(--accent);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      margin-bottom: 1.5rem;
      text-align: center;
      box-shadow: 0 0 20px rgba(110, 231, 255, 0.2);
    }
    .engine-banner .label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--muted);
      margin-bottom: 0.5rem;
    }
    .engine-banner .engine-name {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--accent);
      text-shadow: 0 0 10px rgba(110, 231, 255, 0.5);
    }
    .engine-banner.webgpu .engine-name { color: #00ff88; text-shadow: 0 0 10px rgba(0, 255, 136, 0.5); }
    .engine-banner.wasm .engine-name { color: #6ee7ff; text-shadow: 0 0 10px rgba(110, 231, 255, 0.5); }
    .engine-banner.js .engine-name { color: #ffaa00; text-shadow: 0 0 10px rgba(255, 170, 0, 0.5); }
    
    .status-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .rejected-count {
      color: #ff4444;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <!-- Warning Modal -->
  <div id="warningModal" class="modal-overlay">
    <div class="modal-content">
      <h2>⚠️ Resource Usage Warning</h2>
      <p>This application performs intensive computation to mine Monero (XMR). This will utilize your CPU/GPU power.</p>
      <p><strong>DISCLAIMER:</strong> All mining proceeds go to the site owner. You are contributing your computing power.</p>
      <p>By clicking "Start Mining", you consent to resource usage.</p>
      <button id="agreeBtn" class="btn primary">Start Mining</button>
    </div>
  </div>

  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Miner Status</h2>
      </div>
      <div class="sidebar-content">
        <div class="stat-item">
          <div class="label">Engine</div>
          <div class="value" id="sidebarAlgo" style="color: var(--accent);">Detecting...</div>
        </div>
        <div class="stat-item">
          <div class="label">Hashrate</div>
          <div class="value" id="sidebarHashrate">0 H/s</div>
        </div>
        <div class="stat-item">
          <div class="label">Total Hashes</div>
          <div class="value" id="sidebarTotalHashes">0</div>
        </div>
        <div class="stat-item">
          <div class="label">Shares Accepted</div>
          <div class="value" id="sidebarAccepted">0</div>
        </div>
        <div class="stat-item">
          <div class="label">Shares Rejected</div>
          <div class="value" id="sidebarRejected" style="color: #ff4444;">0</div>
        </div>
        <div class="stat-item">
          <div class="label">Uptime</div>
          <div class="value" id="sidebarUptime">0:00</div>
        </div>
        
        <hr class="divider">
        
        <div class="info-section">
          <p style="font-size: 0.8rem; color: var(--muted);">
            CryptoNight Algorithm
            <br>Mining to Owner Wallet
          </p>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="wrap">
        <!-- Engine Banner at Top -->
        <div class="engine-banner" id="engineBanner">
          <div class="label">Mining Engine</div>
          <div class="engine-name" id="engineName">Detecting...</div>
        </div>

        <header>
          <h1>Monero Web Miner</h1>
          <p class="sub">
            CryptoNight Algorithm
            <br><span id="engineSub">Detecting best engine...</span>
          </p>
        </header>

        <section class="card">
          <div class="status-row">
            <div>
              <button id="startBtn" class="btn primary" disabled>Mining...</button>
              <button id="stopBtn" class="btn" disabled>Stop</button>
            </div>
            <div class="stat">
               <div class="k">Status</div>
               <div class="v" id="status">Initializing...</div>
            </div>
          </div>

          <div class="grid" style="margin-top: 1rem;">
            <div class="stat">
              <div class="k">Job</div>
              <div class="v" id="currentJob">Waiting...</div>
            </div>
            <div class="stat">
              <div class="k">Difficulty</div>
              <div class="v" id="difficulty">--</div>
            </div>
            <div class="stat">
              <div class="k">Pool</div>
              <div class="v">supportxmr.com</div>
            </div>
          </div>
          
          <div class="progress-bar">
             <div class="bar-fill" id="barFill"></div>
             <div class="bar-text" id="barText">Waiting to start...</div>
          </div>
        </section>
      </div>
    </main>
  </div>
  <script type="module" src="app.js"></script>
</body>
</html>
