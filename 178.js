(()=>{"use strict";var t,e,s={},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var h=r[t]={exports:{}};return s[t](h,h.exports,i),h.exports}i.m=s,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"==typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"==typeof s.then)return s}var h=Object.create(null);i.r(h);var o={};t=t||[null,e({}),e([]),e(e)];for(var n=2&r&&s;"object"==typeof n&&!~t.indexOf(n);n=e(n))Object.getOwnPropertyNames(n).forEach((t=>o[t]=()=>s[t]));return o.default=()=>s,i.d(h,o),h},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,s)=>(i.f[s](t,e),e)),[])),i.u=t=>t+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=s[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={178:1};i.f.i=(e,s)=>{t[e]||importScripts(i.p+i.u(e))};var e=self.webpackChunk=self.webpackChunk||[],s=e.push.bind(e);e.push=e=>{var[r,h,o]=e;for(var n in h)i.o(h,n)&&(i.m[n]=h[n]);for(o&&o(i);r.length;)t[r.pop()]=1;s(e)}})();class h{constructor(t){this.throttleWait=0,this.throttledStart=0,this.throttledHashes=0,this.workThrottledBound=this.workThrottled.bind(this),this.currentJob=null,this.target=new Uint8Array([255,255,255,255,255,255,255,255]),this.variant=0,this.height=0,this.blob=[],this.input=new Uint8Array(t.HEAPU8.buffer,t._malloc(256),256),this.output=new Uint8Array(t.HEAPU8.buffer,t._malloc(32),32),this.seed_input=new Uint8Array(t.HEAPU8.buffer,t._malloc(32),32),this.module=t,self.postMessage("ready"),self.onmessage=this.onMessage.bind(this)}onMessage(t){const e=t.data;this.currentJob&&this.currentJob.job_id===e.job_id||this.setJob(e),e.throttle?(this.throttleWait=1/(1-e.throttle)-1,this.throttledStart=this.now(),this.throttledHashes=0,this.workThrottled()):this.work()}hexToBytes(t){const e=t.length/2;let s=new Uint8Array(e);for(let r=0;r<e;++r)s[r]=parseInt(t.substr(2*r,2),16);return s}bytesToHex(t){let e="";for(let s=0;s<t.length;++s)e+=(t[s]>>>4).toString(16),e+=(15&t[s]).toString(16);return e}meetsTarget(t,e){for(let s=1;s<=e.length;++s){if(t[t.length-s]>e[e.length-s])return!1;if(t[t.length-s]<e[e.length-s])return!0}return!1}setJob(t){this.currentJob=t,this.blob=this.hexToBytes(t.blob),this.input.set(this.blob);const e=this.hexToBytes(t.target);if(e.length<=8){for(let t=1;t<=e.length;++t)this.target[this.target.length-t]=e[e.length-t];for(let t=0;t<this.target.length-e.length;++t)this.target[t]=255}else this.target=e;this.variant=void 0===t.variant?0:t.variant,this.height=void 0===t.height?0:t.height,this.seed_blob=this.hexToBytes(t.seed_hash),this.seed_input.set(this.seed_blob)}now(){return self.performance?self.performance.now():Date.now()}hash(t,e,s,r,i,h){const o=4294967295*Math.random()+1>>>0;return this.input[39]=(4278190080&o)>>24,this.input[40]=(16711680&o)>>16,this.input[41]=(65280&o)>>8,this.input[42]=255&o,this.module._randomx_hash(BigInt(i),BigInt(i),h.byteOffset,t.byteOffset,s,e.byteOffset)}work(){const t=this.now();let e=0,s=!1,r=0;for(;!s&&r<1e3;)e+=this.hash(this.input,this.output,this.blob.length,this.variant,this.height,this.seed_input),s=this.meetsTarget(this.output,this.target),r=this.now()-t;const i=e/(r/1e3);if(s){const t=this.bytesToHex(this.input.subarray(39,43)),s=this.bytesToHex(this.output);self.postMessage({hashesPerSecond:i,hashes:e,job_id:this.currentJob.job_id,nonce:t,result:s})}else self.postMessage({hashesPerSecond:i,hashes:e})}workThrottled(){const t=this.now();this.hash(this.input,this.output,this.blob.length,this.variant,this.height,this.seed_input);const e=this.now(),s=e-t+this.throttledHashes,r=e-this.throttledStart,i=this.throttledHashes/(r/1e3);if(this.meetsTarget(this.output,this.target)){const t=this.bytesToHex(this.input.subarray(39,43)),e=this.bytesToHex(this.output);self.postMessage({hashesPerSecond:i,hashes:this.throttledHashes,job_id:this.currentJob.job_id,nonce:t,result:e})}else r>1e3?self.postMessage({hashesPerSecond:i,hashes:this.throttledHashes}):setTimeout(this.workThrottledBound,Math.min(2e3,s*this.throttleWait))}}(async()=>{const t=(await i.e(680).then(i.t.bind(i,680,23))).default,e=(await i.e(984).then(i.bind(i,984))).default,s=await t({locateFile:t=>t.endsWith(".wasm")?e:t});new h(s)})()})();